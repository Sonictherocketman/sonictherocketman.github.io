<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BiteofanApple</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="webmention" href="https://pine.blog/api/webmention/r/f4ecb3b3-6edc-4baa-9553-4f678c3e4b96" />
    <link rel="icon" type="image/png" href="//www.gravatar.com/avatar/11b074a636e00292c98e3e60f7e16595?size=30">
    <link rel="stylesheet" type="text/css" href="/bin/css/stylesheet.css">
    <link rel="stylesheet" type="text/css" href="/bin/css/mobile.css">
    <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/>
    <link rel="alternate" type="application/json" title="JSON Feed" href="/feed.json"/>
    
	<meta property="og:type" content="article" />
  <link rel="authorization_endpoint" href="https://indielogin.com/auth"/>
  <link rel="token_endpoint" href="https://tokens.indieauth.com/token"/>

  </head>
  <body>
    <div id="content">
      <div class="nav-container">
  <nav class="nav">
    <div class="nav-item nav-brand">
      <a href="/" class="site-title">
        BiteofanApple
      </a>
      <span
        class="author-tag hide-on-mobile"
      >
        by <a href="/about/">Brian Schrader</a>
      </span>
    </div>
    <div class="nav-item"><a href="/archive/">Archive</a></div>
    <div class="nav-item"><a href="/about/">About</a></div>
    <div class="nav-item"><a href="https://skyrocket.software">Apps</a></div>
    <div class="nav-item"><a href="https://pine.blog/u/sonicrocketman">Microblog</a></div>
  </nav>
</div>
      
  <div class="bars">
    <div class="main-bar">
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/imports-are-endorsements/" class="u-url p-name">
                Imports are Endorsements
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-05-20T18:00:00-08:00">
                Posted on Thu, 20 May 2021 at 06:00 PM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>When you import someone's code, are you endorsing them?</p>
<p>At first glance, the answer might seem simple: of course not! And while it's pretty obvious that imports are not universal endorsements of the code's author, they aren't entirely void of meaning either. Endorsements aren't an indivisible quanta&mdash;some fundamental particle that cannot be divided&mdash;they exist on a spectrum.</p>
<h2>Supply chains are tricky things</h2>
<p>Importing code written by someone else is always a risky endeavor. Most often external dependencies work and work well, but they also expose your software to additional risk. The fact that you are willing to depend on someone else's code implies some kind of inherent bond of trust. It implies a relationship between the developer (or organization) and the code author. Importantly, it also implies that the developer finds the author's code valuable in some way.</p>
<p>Dependencies are part of a software's digital supply chain&mdash;along with any other provider we use to power our software. And in today's world, where alternative dependencies abound, many people understand that the various links in the supply chain aren't simply bound together out of mutual necessity. They choose to depend on each other, and so there are shared values and responsibilities that are common to all in the chain.</p>
<p>Using an example out of the news, Apple doesn't manufacture many of the components in its devices, yet when it's partner Foxconn is found to be abusing workers, we place some of that blame on Apple for choosing to work with Foxconn given their past behavior. Similarly, Google and Microsoft do not generate their own power, yet they've made efforts to rid their supply chains of fossil fuels, and the public has&mdash;rightly&mdash;heaped praise on them for these actions. From fashion to technology we understand that companies are somewhat responsible for choosing ethical and responsible supply chain partners. Why should developers be any different?</p>
<h2>Our decisions matter</h2>
<p>I think most people would agree with the decision not to use software written by an outspoken white-supremacist, but even that extreme example implies that there is some threshold where the author's views would impact the technical decision to use a given toolset. The literature, music, and film worlds are well-accustomed to this debate. Authors leave a mark on their work. How big that mark is remains a subject of debate, but there's no debate that the author has at least some impact.</p>
<p>Obviously big tech companies and organizations don't suffer because one company decides not to use their stuff&mdash;ideas require collective, industry-wide action to produce results.</p>
<p>The point is that our decisions to use Facebook's frameworks, Google's toolsets, Apple's platforms, or Amazon's services must be informed by their creators' behaviors and policies. Sometimes these decisions will be good for business, and sometimes not. Other times they might be incredibly beneficial or utterly unremarkable. Regardless of their effects, these decisions matter.</p>
<p>Some readers might bemoan this idea, claiming that I'm making software political, but everything is political in some form. Software doesn't exist in a vacuum and there are real consequences to our choices that echo beyond the apps and websites we build.</p>
<p>Whether we like it or not, the role of engineers is to manipulate the real world to achieve some end, and how we do that work has just as much import as what end we achieve.</p>
<p>I, for one, am driven to do what I can to mitigate the effects of Climate Change, so I host all of my new services <a href="https://nine9s.cloud/kb/infrastructure">in data centers powered by renewable energy</a> and I'm working on migrating my existing services there as well. My hosting platform is a part of my digital supply chain, and I bear some responsibility for the emissions my services produce. The downside is that those servers are in Europe now, so my ping times suffer a bit, but to me that tradeoff was worth making.</p>
<p>Destinations matter, but the road to the destination matters too. Developers achieve our ends through importing other people's code, and those imports matter. Choose yours well.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/easy-and-ethical-traffic-monitoring-with-goaccess/" class="u-url p-name">
                Easy and Ethical Traffic Monitoring with GoAccess
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-05-03T18:08:00-08:00">
                Posted on Mon, 03 May 2021 at 06:08 PM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>Traffic monitoring is a staple for web businesses, but for some reason, we've outsourced a pretty simple problem to mischievous third-parties. While there are well-behaved traffic monitoring platforms, I've developed a few homegrown solutions that have worked really well for me and my business. If you're looking for an easy traffic monitoring solution, and you're conscious of your user's/visitor's privacy, you should try one of these solutions. I promise, they're pretty simple.</p>
<h2>Option 1: Just Don't</h2>
<p>You always have the option to just not do traffic monitoring. Often times we can convince ourselves that data we collect is precious or useful when it fulfills no real business or personal need.</p>
<p>If you're a blogger, then traffic might matter to you, but <a href="https://inessential.com/2016/01/20/nick_on_twitter">it probably shouldn't</a>. Back when <a href="/archive/removing-google-analytics/">I used to use Google Analytics</a> I also had very few visitors to this site. Was it useful to know that 13 people had seen my article? Not really, but it felt useful. In the end it was just another stat for me to endlessly refresh. Progress bars are fun to watch, but you'd probably be better off writing another post, or just going for a walk.</p>
<p>If you own a business that sells a product, then remember this: it's not actually relevant how many hits your website gets. It's important how many products you sell. At one point, <a href="https://goingindie.tech">Going Indie</a> was featured on Product Hunt, which was awesome, but that featuring resulted in very few actual sales. Was it worth my time to endlessly refresh the PH dashboard? No, and I kinda wish I didn't have the option.</p>
<p>Real-time dashboards are addictive dopamine factories. Sometimes it's better to just avoid them.</p>
<h2>Option 2: Use GoAccess</h2>
<p>If you need to have some sort of traffic monitoring, then give <a href="https://goaccess.io">GoAccess</a> a try. GoAccess aggregates webserver access logs and provides reports either live in the shell, or as really elegant and self-contained HTML files.</p>
<p>I've used GoAccess for years, and it's become my default solution for traffic monitoring. I've automated my reporting using my <a href="/archive/building-a-personalized-newsletter-with-bash-and-a-raspberry-pi/">new helper RPi</a>. Every week, the RPi generates and aggregates the reports for my various websites and emails them to me.</p>
<p><a href="https://rt.goaccess.io/?20210429113731&amp;ref=hpimg"><img alt="Sample GoAccess Report" src="/images/blog/goaccess.png" /></a>
<center><small><caption>A sample GoAccess HTML report</small></center></caption></p>
<p>There are downsides to GoAccess though. Since it's using access logs, the numbers are inflated by bots and browser prefetching. GoAccess has ways to filter out some of those things, but in most cases, I've just gotten used to the numbers being bigger than they really should be.</p>
<p>One upside to using server-side traffic monitoring is that your stats are unaffected by people who are using ad-blockers or who refuse to enable JavaScript (are there still people doing that?)</p>
<h2>Option 3: Roll Your Own</h2>
<p>For some projects, I've needed more reliable and accurate traffic stats. To do that, I decided it would be best to roll my own. As I said earlier, traffic monitoring is a pretty simple problem-domain&mdash;as long as you're willing to live with some margins of error. My <a href="http://democracyandprogress.com">California policy blog</a> uses a homegrown traffic monitoring solution that is so maddeningly simple, I will include it below in its entirety&mdash;formatted for readability.</p>
<pre><code>(function() {
    if (window.fetch) setTimeout(function() {
        fetch('/pageview?u=' + window.location.pathname)
    }, 2000)
})()
</code></pre>
<p>This snippet sets a timer for two seconds and then fires a request off to <code>/pageview</code> which simply returns a 200 response. The site is statically generated&mdash;just like this one&mdash;so it can't do any processing or custom request handling, and there's an empty file called pageview in the webroot directory. I join all of my access logs together, remove anything that doesn't contain a request to <code>/pageview</code> and voila!</p>
<pre><code>zcat /var/log/nginx/access*gz | grep pageview &gt; $STATSFILE;
cat /var/log/nginx/access.log | grep pageview &gt;&gt; $STATSFILE;

/usr/local/bin/goaccess \
    -f $STATSFILE \
    --ignore-crawlers \
    -p /etc/goaccess.conf \
    &gt; $REPORTFILE;
</code></pre>
<p>These reports won't include any requests made by searchbots, any request that didn't execute the JavaScript, or any request made by a user that didn't keep the page open for at least two seconds. This solution gives me simple and effective traffic stats that leverage the data my servers were already collecting, with no additional or accidental data collection required!</p>
<h2>What Really Matters</h2>
<p>Traffic monitoring is a useful, but addictive tool, and it's easy to get caught up in the data they collect and convince yourself that it's more useful than it really is. At the end of the day, I just need to know, roughly, how many people read one of my articles or how many visited the homepage of a service I run. I don't need to know who they were or anything else about them, and I don't want more data than I need.</p>
<p>Due to the limitations of server-side monitoring&mdash;even with my JS snippet&mdash;GoAccess can't provide you with exact traffic numbers; nothing can. But like I said, you probably don't need exact numbers. You probably only really need the order of magnitude, which server-side monitoring can easily provide.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/how-i-use-docker-for-now/" class="u-url p-name">
                How I Use Docker (for Now)
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-04-30T01:05:00-08:00">
                Posted on Fri, 30 Apr 2021 at 01:05 AM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>In a recent episode of <a href="https://indiedevlife.fm/archive/13-im-starting-to-regret-promising-things/">Indie Dev Life</a> I went into some detail about how I use <a href="https://www.docker.com">Docker</a> to host my software. I discussed my experiences with and guidelines for using Docker in production. This post is a continuation of that discussion.</p>
<p>I've been using Docker to run my software in production ever since the launch of <a href="https://adventurerscodex.com">Adventurer's Codex</a>, and <a href="https://mygenerank.scripps.edu">MyGeneRank</a> back in 2017. In my technical discussion <a href="/archive/adventurers-codex-the-stack/">blog post</a> for <a href="/archive/mygenerank-behind-the-scenes-of-the-newest-researchkit-app/">both projects</a>, I talked a little bit about Docker and its place in the stack. I also discuss Docker and its role as a deployment tool briefly in <a href="https://goingindie.tech">Going Indie</a>.</p>
<blockquote>
<p>Over the years Iâ€™ve managed to tune my services to be incredibly easy to upgrade. For example, since Nine9s is written in Python and uses Docker, a deploy is simply a <code>git pull</code> and <code>docker-compose up</code>. Nowadays, even those steps are automated by a bash script. Having such a simple process means that I can deploy quickly, and it lessens the cognitive burden associated with upgrading a service, even when that service has gone without changes for months.</p>
</blockquote>
<p>Over time, Docker's role in my software has morphed and evolved. During the initial launch of Adventurer's Codex, I depended heavily on community-built Docker files for large portions of the architecture. But over time Docker has actually shrunk to fill a much more limited role.</p>
<h2>The Problem Docker Solves (for Me)</h2>
<details>
  <summary>Context</summary>
  <p>I use <a href="http://linode.com" title="Linode">Linode</a> for my server hosting, so I'm already operating within a VM, and depending on the software, I might have multiple virtual servers powering a given service. Docker simply provides isolation for processes on the same VM. I do not use Docker Swarm, and I've always just used the community edition of Docker.</p>
</details>

<p>To me, Docker has become a tool that makes it easy to upgrade and manage my own code and other supporting services. All of my code runs in a Docker container, but so do other systems that my code depends on. For example, Pine.blog and Nine9s both use memcache for <a href="https://docs.djangoproject.com/en/3.2/topics/cache/">template caching</a> since support for it is built into Django&mdash;my preferred web framework. Each web server runs Nginx on the host which reverse-proxies to Docker containers running my Django apps.</p>
<p>Both services also perform asynchronous processing via worker nodes. These workers are running inside of Docker. Pine.blog's workers are spread across various machines and pass requests through their own <a href="https://github.com/Sonictherocketman/johnny-cache">custom forward caching proxy</a> containers backed by a shared Redis instance also in Docker.</p>
<p>This setup ensures that I can easily upgrade my own code, and it ensures that exploitable services like memcache aren't exposed to the outside world.</p>
<p>In short, I've found that Docker works great for parts of the stack that are either upgraded frequently or for parts of the stack that are largely extraneous and that only need to communicate with other parts on the same machine.</p>
<p>I've largely stopped using Docker in cases where there are external tools that rely on things being installed on the host machine, or where the software requires more nuanced control. Nginx is a great example. All of my new projects have Nginx installed on the host, not in Docker. This is because so many tools from log monitoring to certbot are designed to run on a version of Nginx installed globally. I use Nginx as both a webserver for static content and a reverse-proxy to my Django apps. If you want to use Nginx in Docker, I'd suggest only using it for the former case. The latter is better installed on the host.</p>
<p>I'm still torn about running my databases and task brokers in Docker. Docker (without Swarm) really annoys me when I'm configuring services that need to be accessed by outside actors. Docker punches through CentOS firewalls which renders most of my typical tactics for securing things moot. I've also started to question the usefulness of Docker when I'm configuring a machine that serves only one purpose. Docker is great at isolating multiple pieces of a stack from each other, but on a single-purpose VM it seems like it's just another useless layer that's only there for consistency.</p>
<p>Docker on CentOS is particularly irritating as the <code>devicemapper</code> doesn't seem to release disk space that it no longer needs. This means that your server is slowly loosing useful disk space every time you update and rebuild your containers. After about 3 years of upgrades, Pine.blog's main server has lost about 20GB of storage to this bug. Needless to say, I'm investigating a move to Ubuntu in the near future.</p>
<h2>What about Docker in Development?</h2>
<p>As with Docker in production, I have mixed feelings about the role Docker plays in my development. I dev on a Macbook Pro, and my Django apps run in a plain-old virtual environment. No Docker there. That said, I do use Docker to run extraneous services&mdash;like Redis, memcache, or that forward caching proxy.</p>
<p>I stopped running my Django apps in Docker a while back for much the same reason that I no longer run Nginx in Docker. Even with Docker's recommended fixes, Django's management CLI is frustrating to use through Docker and I've had more than one issue with Docker's buffering of log output during development.</p>
<h2>Docker: Four Years In</h2>
<p>Overall, I really like Docker. It makes deployments super simple: just <code>git pull</code> and <code>docker-compose up</code> (or use my fancy shell script that does zero-downtime deploys). That said, I'm certainly not a Docker purist. I use Docker in a way that reduces the friction of my deploys, and I'm starting to use it less and less when it's just another layer that serves little purpose.</p>
<p>Like every tool, Docker has it's role to play, but in my experience it's not the silver bullet that many people think. I haven't used Docker on AWS via ECS, so I can't comment on that. Perhaps that's where Docker really shines. I still prefer a more traditional hosting strategy. Either way, Docker will remain an important tool in my toolbelt for the foreseeable future.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/lessons-on-variable-naming-from-breakfast-burritos/" class="u-url p-name">
                Lessons on Variable Naming from Breakfast Burritos
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-04-17T01:19:00-08:00">
                Posted on Sat, 17 Apr 2021 at 01:19 AM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>This morning I ordered a breakfast burrito from a local taco shop. Normally this would not be news and obviously would not warrant a blog post or any in-depth analysis, but it was early and I hadn't yet had coffee, so my mind was loose and my thoughts wandering. As I looked over the menu, I pondered the two vegetarian breakfast burrito options:</p>
<ul>
<li><strong>Mushroom burrito</strong> filled with mushrooms, potatoes, eggs, and cheese</li>
<li><strong>Potato burrito</strong> filled with potatoes, eggs, beans, and cheese</li>
</ul>
<p>At the counter I asked for the potato breakfast burrito, and I intended to order the latter of the two, but it occurred to me that they both contained potatoes and therefor my order was ambiguous. What after all makes a burrito with potatoes, eggs cheese, and mushrooms deserve a different name than a burrito with potatoes, beans, eggs, and cheese? What makes the latter not a bean breakfast burrito, as the beans are the item that is unique to the latter burrito whereas potatoes are common to both? Are potatoes a more significant ingredient? If so, why?</p>
<p>I received my order&mdash;which was correct by the way&mdash;and went home, but as I walked I wondered, how is it that the cashier and I understood each other? There was so much ambiguity in the names of those menu items. How were we able to make sense of the obvious ambiguity?</p>
<h2>Naming is <strong>Really</strong> Hard</h2>
<p>If you haven't seen the connection by now, let me drop the pretext. These same questions also relate to how we choose to name our variables and our functions in code. Naming after all is hard, and I think my burrito example helps explain why.</p>
<blockquote>
<p>It is often said that the three hardest problems in computer science are naming and off-by-one errors.</p>
</blockquote>
<p>In a more rigorous naming system, I assume that most people would come to the conclusion that the second burrito is probably mis-named. It should be called the "bean breakfast burrito" since, as I mentioned, the beans are the distinct ingredient that make the latter burrito not strictly a subset of the former.</p>
<p>That said, beans are not normally considered a main ingredient in a burrito. In the conventional burrito naming scheme, more appealing or distinct ingredients, or ingredients not considered to be condiments, take precedence. This naming scheme is the reason why a burrito with carne asada, pico de gallo, and guacamole would be simply called a carne asada burrito and not a guacamole burrito.</p>
<p>These same conventions exist when we name variables and functions. We can imagine a scenario where we have a list of users and need to filter out which users have recently logged in and which among those have active subscriptions to our service.</p>
<pre><code>def get_active_subscribed_users():
    all_users = get_all_users()
    active_users = (user for user in all_users if user.is_active)
    &lt;variable&gt; = (user for user in active_users if user.has_active_subscription)
</code></pre>
<p>The first two variable names are fairly obvious, the question becomes: what do we name the third variable so that it is not ambiguous? We could of course call this new variable <code>active_users_with_active_subscriptions</code>, but to many that would be too long, and to my eyes that makes it seem that this variable contains a list of <code>(user, subscription)</code> pairs.</p>
<p>We could name the value <code>active_users</code>, <code>actively_subscribed_users</code>, or even just <code>relevant_users</code> if the criteria for what relevancy means is clear enough in context. Some developers prefer to simply refer to these as <code>users</code> but I find that incredibly confusing. Others may prefer to define the variable <code>users</code> and then redefine it as they filter down the list to suit their needs, which I find even more confusing and unclear.</p>
<p>In practice I tend to prefer the third option along with a comment explaining what I mean by "relevant". This only exacerbates our problems though. If two groups of "relevant" users meet in a new context, their names would clash and we would need to find new names for these groups.</p>
<p>The context is here is key. If we instead fetched the same list from another function call, we could drop the qualifier entirely.</p>
<pre><code>def get_active_subscribed_users():
    users = get_active_users()
    # We can avoid the question entirely if we simply return the list here.
    return (user for user in users if user.has_active_subscription)
</code></pre>
<h2>Names are a Leaky Abstraction</h2>
<p>As with our breakfast burritos, we could simply default to the names being a list of the components, but that can become overly burdensome very quickly. Our potato burrito would be unceremoniously called the "potato, eggs, bean and cheese breakfast burrito", which is unambiguous but also cumbersome. It can also cause problems as forgetting to mention a single component could confuse the reader and lead them to believe that a reference to a potato, egg, and bean burrito was not the same as your potato, egg, bean, and cheese burrito even if you were both referring to the same thing.</p>
<p>As programmers we aren't taxed by the character; we can have longer variable names, but at best those names should be descriptive, succinct, and distinct. Issues arise when names, by their nature, don't convey the whole story. Names almost always convey a summary of their true meaning. They can't effectively convey the context in which the name was given or the inherent value of the named thing. Out of context a name might be confusing, but that confusion may vanish when used in the appropriate context.</p>
<p>Likewise, in some contexts a potato breakfast burrito is the same thing as a mushroom burrito, but today it wasn't.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/building-a-personalized-newsletter-with-bash-and-a-raspberry-pi/" class="u-url p-name">
                Building a Personalized Newsletter with Bash and a Raspberry Pi
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-04-03T21:02:00-08:00">
                Posted on Sat, 03 Apr 2021 at 09:02 PM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>I use <a href="https://pinboard.in/">Pinboard</a> to save articles I've read and, increasingly, to save articles I <em>want</em> to read. That said I rarely go back and actually read things once they disappear into the Pinboard void. This isn't an uncommon problem, I know, but I think I've devised a simple solution.</p>
<p>I recently set up a Raspberry Pi and mounted it under my desk. I've been playing with RPis for years, but I'd never found a recurring need for them, they've always been toys with fleeting amusement value. But this time around, I've configured it as both a local web server and Samba file share. This allows me to quickly and easily share files with the RPi and, since I configured it to send emails through my Fastmail account, it can now alert me whenever I want.</p>
<h2>My Pinboard Weekly Newsletter</h2>
<p>Now that everything on the RPi is set up and easily accessable, I wrote up a simple <a href="https://gist.github.com/Sonictherocketman/8504244c5c916f41dc7815e28f297b86">bash script</a> to pull my most recent bookmarks from Pinboard, filter out the stuff I've already read, and draft an email with everything from the past week that I still haven't gotten to.</p>
<p>I've posted a simplified version <a href="https://gist.github.com/Sonictherocketman/8504244c5c916f41dc7815e28f297b86">on Github</a>, but my real script isn't much more complex&mdash;all told it comes out to 55 lines of code&mdash;and it's run with a simple, weekly cron job.</p>
<p><img alt="Pinboard Weekly" src="/images/blog/pinboard-weekly.png" />
<center><small><i>Here's a sample of the newsletter email&mdash;and yes, my RPi's name is Demin.</i></small></center></p>
<p>Hopefully this weekly newsletter reminds me to actually go back and read the interesting news and articles I've collected during the week (or it will help remind me just how unimportant certain things really are when you've had a week to let them sit).</p>
<p>If you use Pinboard, and you constantly find yourself saving articles and never reading them, give my script a try. If you do, let me know what you think!</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/why-all-my-servers-have-an-8gb-empty-file/" class="u-url p-name">
                Why All My Servers Have an 8GB Empty File
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-03-25T18:39:00-08:00">
                Posted on Thu, 25 Mar 2021 at 06:39 PM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>Last night I was listening to the latest <a href="https://www.relay.fm/radar/213">Under the Radar</a>, where Marco Arment dove into nerdy detail about his recent <a href="https://overcast.fm">Overcast</a> server issues. The discussion was great, and you should listen to it, but Marco's recent server troubles were pretty similar to my own <a href="/archive/pineblog-downtime-post-mortem-a-story-of-finite-resources/">server issues</a> from last year, and so I figured I'd share my life-hack solution for anyone out there with the same problem.</p>
<h2>The what and where</h2>
<p>Both hosts, Marco Arment and David Smith, run their own servers on Linode&mdash;as do I&mdash;and I found myself nodding along in solidarity with Marco as he discussed his toils during a painful database server migration. Here's the crux of what happened in <a href="https://overcast.fm/+FgnbaF18Q/14:09">Marco's own words</a>:</p>
<blockquote>
<p>The disk filled up, and that's one thing you don't want on a Linux server&mdash;or a Mac for that matter. When the disk is full nothing good happens.</p>
</blockquote>
<p>One thing Marco said hit me particularly close to home:</p>
<blockquote>
<p>Server administration, when you're an indie, is very lonely.</p>
</blockquote>
<p>During my major downtime problem last year, I felt incredibly isolated and frustrated. There was no one to help me and no time to spare. My site was down and it was down for a while. My problem was basically the same: my database server filled up (but for a different reason). And as Marco said, when the disk is full, nothing good happens.</p>
<p>In the days after I fixed my server issues, I wanted to ensure that even if things got filled up again, I would never have trouble fixing the problem.</p>
<h2>A cheap hack? Yes. Effective? Also Yes.</h2>
<p>On Linux servers it can be incredibly difficult for any process to succeed if the disk is full. Copy commands and even deletions can fail or take forever as memory tries to swap to a full disk and there's very little you can do to free up large chunks of space. But what if there was a way to free up a large chunk of space on disk right when you need it most? Enter the <code>dd</code> command<sup>1</sup>.</p>
<p>As of last year, all of my servers have an 8GB empty <code>spacer.img</code> file that does absolutely nothing except take up space. That way in a moment of full-disk crisis I can simply delete it and buy myself some critical time to debug and fix the problem. 8GB is a significant amount of space, but storage is cheap enough these days that hoarding that much space is basically unnoticeable... until I really need it. Then it makes all the difference in the world.</p>
<p>That's it. That's why I keep a useless file on disk at all times: so I can one day delete it. This solution is super simple, trivial to implement, and easy to utilize. Obviously the real solution is to not fill up the database server, but as with Marco's migration woes, sometimes servers do fill up because of simple mistakes or design flaws. When that time comes, it's good to have a plan, because otherwise you're stuck with a full disk and a really bad day.</p>
<div class="footnote">
<sup>1</sup> There are <a href="https://www.cyberciti.biz/faq/howto-create-lage-files-with-dd-command/"> lots of tools you can use to do</a> this besides dd. I just prefer it.
</div>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/all-too-quiet/" class="u-url p-name">
                All Too Quiet
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-03-07T02:12:00-08:00">
                Posted on Sun, 07 Mar 2021 at 02:12 AM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>Other than my last post, it's been pretty quiet here lately. I've spent the majority of the last two months wrapping up the newest update to Pine.blog, which launched silently about a month ago. I meant to do a sort of announcement or retrospective post on the launch, but I just never got around to it.</p>
<p>A new <a href="https://indiedevlife.fm">IndieDevLife</a> is coming, but I haven't had the mental bandwidth to record an episode lately. I've been spending a lot of time reading and writing policy proposals for <a href="http://democracyandprogress.com">Democracy &amp; Progress</a> and I've been pouring the remainder of my time into a new iOS app.</p>
<p>That's right, I've started yet another new app! It's in a private, early beta now, and I'm expecting the launch in May. No more details just yet, but I promise this one will be particularly special. I'm doing a lot that I've never done before, and playing with APIs I'd never heard of until now. It's fun stuff.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/california-democracy-and-progress/" class="u-url p-name">
                California, Democracy, and Progress
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-03-05T19:26:00-08:00">
                Posted on Fri, 05 Mar 2021 at 07:26 PM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>Last week I published the first proposal on <a href="http://democracyandprogress.com">Democracy &amp; Progress</a>, my new public policy blog. It's about Democracy Vouchers and how California should adopt them.</p>
<p>You should read the post, then please consider subscribing. The blog is in its initial launch phase, so your subscription means more than it normally would.</p>
<p>I've been wanting to write about policy for a long time, but I could never quite figure out the tone or the topic scope. I finally settled on the idea of discussing California politics through the lens of improving and promoting democracy. It's a big topic, and there's a lot to discuss, so I hope you'll follow along and let me know what you think.</p>
<p>Over the last few years, I've become pretty immersed in the policy world's conversations. I read a lot of policy books, articles and papers, I follow a lot of political writers, and I listen to a lot of politics podcasts. Over time, I started to develop my own policy outlook and then I wanted to participate in the conversation to add what I thought was a different angle on the discussion. Last year I started writing Op-Eds and <a href="http://sduptownnews.com">publishing some in my local paper</a>, but also I wanted to do more than that. I just couldn't figure out what my angle would be, what kinds of topics or ideas I wanted to cover, and through what lens I would cover them.</p>
<p>A few years back, while listening to the <a href="https://www.nytimes.com/column/ezra-klein-podcast">Ezra Klein Show</a>, Ezra lamented that we as a society didn't spend more time focusing on local and state politics&mdash;where our time and energy is often better spent. Collectively, we don't focus on state and local politics, and yet it's only there where a lot of policy solutions can be done. That conversation stuck with me, and over time the drive to write about state politics has only gotten deeper. It was last summer, when I read <a href="https://www.indiebound.org/book/9781568588384">All Politics is Local</a>, that the idea for what would become <a href="http://democracyandprogress.com">D&amp;P</a> really started to form.</p>
<p>While I was scoping out the policy-blog space, I did a lot of searching around and while I found lots of medium to long-form policy blogs focusing on the national federal government (a lot of which I was already following), I didn't find a lot of the same thing at the state level. It was then I realized I had found my niche.</p>
<p>Politics can be a difficult thing to discuss in public, so that's why I wanted to focus on policy, not politics. Hopefully the blog can stay far away from the concerns of the day and avoid kindling a partisan fervor. At D&amp;P, we're going to focus on solutions. California is a solidly Democratic state (the party not the governing strategy), so partisan squabbling is less of an issue&mdash;which is a blessing&mdash;but there are still plenty of difficult issues.</p>
<p>As part of my work for D&amp;P, I've started compiling a <a href="http://democracyandprogress.com/archive/resources/">list of resources</a> for people to help them follow California politics. I know I wish I'd had something like this to get me started, so hopefully I can pay it forward.</p>
<p>Please consider giving D&amp;P a follow in your favorite feed reader via <a href="https://democracyandprogress.com/rss.xml">RSS</a>, on <a href="https://twitter.com/dem_and_prog">Twitter @dem_and_prog</a>, or sign up for <a href="https://tinyletter.com/democracyandprogress">the newsletter</a>. Here's to a better, more policy focused California.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/various-goings-on/" class="u-url p-name">
                Various Goings On
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2021-01-03T05:49:00-08:00">
                Posted on Sun, 03 Jan 2021 at 05:49 AM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>I've been a little scatter-brained over the past few weeks. I've started lots of little projects and finished almost none of them. Hopefully, they'll all start to wrap up soon. I mentioned on a previous <a href="https://indiedevlife.fm">Indie Dev Life</a> that I was working on an update to the <a href="https://pine.blog">Pine.blog</a> iOS app, and that is still true. It's coming along nicely. I think I'm about 80% done with it, but I've reached the infamous second 80% and it's become a bit of a slog, so I did what a usually do in this situation: literally anything else.</p>
<p>To that end, I've been experimenting with a few other projects. I've started the process of adding a dark mode to Pine.blog's Web UI, which is coming along nicely. I've also started building out Micropub support for Pine.blog. Both are features I've wanted for a long time, but never gotten to. Hopefully they'll be done around the same time as the iOS refresh. I've always struggled with putting together a coherent design for the Pine.blog web UI, and it shows. With the newest refactor of Pine.blog for iOS though, I've finally developed a coherent design and I've started using the same layout and components on both iOS and the web. It's looking really good, and hopefully this new design will last a while and bring Pine.blog up to modern standards.</p>
<p>On Monday the holidays are officially over and I'll force myself to finish the iOS release for Pine.blog. Usually I try to keep myself pretty focused, but for now I'll keep tinkering &mdash; it's a nice thing to do every once in a while.</p>
          </div>
        </div>
      </article>
      
      <article>
        <div class="post h-entry">
          <div class="article-title">
            <h1><a href="/archive/breadcrumbs-and-pinboard/" class="u-url p-name">
                Breadcrumbs and Pinboard
              </a>
            </h1>
            <small style="font-style:italic;">
              <time class="dt-published" datetime="2020-12-31T01:44:00-08:00">
                Posted on Thu, 31 Dec 2020 at 01:44 AM
              </time>
            </small>
          </div>
          <div class="article-content e-content">
            <p>I use <a href="https://pinboard.in">Pinboard</a>, and I have for some time. For years, I've dumped the occasional interesting article there and then largely forgotten about it. Recently though, I've decided to really dive in and start using the service to solve a problem I routinely have.</p>
<p>I read a lot of articles, as I'm sure many of you do, and I often refer to them in conversation or in a blog post. When I do reference an article I like to cite it, even in conversation, but I often can't find the article anymore nor can I remember enough about it to effectively search for it. I think it's important to cite your sources, even casually, because it helps you recognize your own filter bubble, and it helps to ground you in the realm of facts. It also helps the other people you're conversing with better understand and counter your argument if they can tell where you're getting your information from. Plus, if you can find the original source, you can always verify that you're remembering the information correctly.</p>
<p>In an effort to forever solve this problem, I've started archiving essentially every article I read in Pinboard, and I do this whether or not I think the article was any good. This effectively turns Pinboard into a breadcrumb trail that I can use to retrace my path on the Web and hopefully dig up and verify any information that I half-remember.</p>
<p>A while back, I started <a href="https://pine.blog/u/sonicrocketman/archive/e335c9e3-4e5f-4249-ad15-644c33bd658b">taking notes</a> when I read books so I can more easily remember and refer back to information I may need, but I don't want to keep a notebook for everything I read online. Enter Pinboard.</p>
<p>There are a few things that my system is lacking so far. Most importantly, I'm still having trouble finding some articles when I know that I've bookmarked them. It seems that either Pinboard's search isn't working how I'd expect or I'm not giving it enough metadata to search through when bookmarking articles.</p>
<p>Hopefully, as I get more accustomed to this new way of using Pinboard I'll drastically increase the frequency when I can recall some useful fact and also produce a worthy citation.</p>
          </div>
        </div>
      </article>
      
    </div>
    <div class="side-bar">
      <div class="promotion">
  <div>
    <a href="https://goingindie.tech" title="Going Indie More Information">
      <img
          class="promotion-cover"
          src="/images/going-indie/cover-icon.jpg"
          height="100px"
          width="100px"
      />
    </a>
  </div>
  <div>
    Going Indie
    <small>
      <p>
        A complete guide to becoming an independent software developer
      </p>
      <a href="https://goingindie.tech" title="Going Indie Order Now">
      Order Now &#8594;
      </a>
    </small>
  </div>
</div>
<h4>Featured Posts</h4>
<ul>
  
  <li><a href="/archive/announcing-hewell-public-beta-/" title="Announcing: Hewell Public Beta ðŸŽ‰" rel="nofollow">
    Announcing: Hewell Public Beta ðŸŽ‰
  </a></li>
  
  <li><a href="/archive/on-uber-lyft-and-labor-law/" title="On Uber, Lyft, and Labor Law" rel="nofollow">
    On Uber, Lyft, and Labor Law
  </a></li>
  
  <li><a href="/archive/d20photos-a-public-domain-dd-image-repository/" title="d20.photos: A Public Domain D&amp;D Image Repository" rel="nofollow">
    d20.photos: A Public Domain D&amp;D Image Repository
  </a></li>
  
  <li><a href="/archive/announcing-nine9scloud-/" title="Announcing Nine9s.cloud ðŸŽ‰" rel="nofollow">
    Announcing Nine9s.cloud ðŸŽ‰
  </a></li>
  
  <li><a href="/archive/why-were-polarized/" title="Why We&#39;re Polarized" rel="nofollow">
    Why We&#39;re Polarized
  </a></li>
  
  <li><a href="/archive/a-new-adventure/" title="A New Adventure" rel="nofollow">
    A New Adventure
  </a></li>
  
  <li><a href="/archive/the-social-web/" title="The Social Web" rel="nofollow">
    The Social Web
  </a></li>
  
  <li><a href="/archive/feed-readers-and-local-news/" title="Feed Readers and Local News" rel="nofollow">
    Feed Readers and Local News
  </a></li>
  
  <li><a href="/archive/the-web-as-a-social-network/" title="The Web as a Social Network" rel="nofollow">
    The Web as a Social Network
  </a></li>
  
  <li><a href="/archive/a-vision-of-the-open-web/" title="A Vision of the Open Web" rel="nofollow">
    A Vision of the Open Web
  </a></li>
  
</ul>
<h4>Also Me</h4>
<ul>
  <li><a href="http://pine.blog/u/sonicrocketman" title="Pine.blog" rel="nofollow me">
    Pine.blog
  </a></li>
  <li><a href="https://github.com/sonictherocketman/" title="GitHub" rel="nofollow me">
    GitHub
  </a></li>
  <li><a href="https://twitter.com/sonicrocketman" title="Twitter" rel="nofollow me">
    Twitter
  </a></li>
  <li><a href="//pinboard.in/u:sonicrocketman/public/" title="Pinboard" rel="nofollow me">
    Pinboard
  </a></li>
  <li><a href="http://photos.brianschrader.com" title="My Photoblog" rel="nofollow me">
    Photoblog
  </a></li>
  <li><a href="https://en.gravatar.com/sonicrocketman" title="Gravatar" rel="nofollow me">
    Gravatar
  </a></li>
  <li><a href="https://sonicrocketman.bandcamp.com" title="Bandcamp" rel="nofollow me">
    Bandcamp
  </a></li>
  <li><a href="https://www.goodreads.com/user/show/119559749-brian-schrader" title="Goodreads" rel="nofollow me">
    Goodreads
  </a></li>
</ul>
<h4>Projects</h4>
<ul>
  <li><a href="http://democracyandprogress.com" title="Democracy and Progress">
    Democracy &amp; Progress
  </a></li>
  <li><a href="https://goingindie.tech" title="Going Indie">
    Going Indie
  </a></li>
  <li><a href="https://pine.blog" title="Pine.blog" rel="nofollow">
    Pine.blog
  </a></li>
  <li><a href="https://indiedevlife.fm" title="Indie Dev Life Podcast">
    Indie Dev Life Podcast
  </a></li>
  <li><a href="https://nine9s.cloud" title="Nine9s" rel="nofollow">
    Nine9s
  </a></li>
  <li><a href="https://d20.photos" title="d20.photos" rel="nofollow">
    d20.photos
  </a></li>
  <li><a href="https://adventurerscodex.com" title="Adventurer's Codex" rel="nofollow">
    Adventurer&apos;s Codex
  </a></li>
</ul>
<h4>Resources</h4>
<ul>
  <li><a href="/archive/bookshelf" title="Book Recommendations">
    Book Recommendations
  </a></li>
  <li><a href="/archive/recipes/" title="Food and Drink Recipes">
    Food &amp; Drink Recipes
  </a></li>
  <li><a href="/tags.html" title="Posts by Tag">
    Tags
  </a></li>
</ul>
<h4>Other Writings</h4>
<ul>
  <b>The Way Forward (Series)</b>
  <li>
    <ul>
      <li><a href="https://sduptownnews.com/guest-editorial-the-way-forward-conquering-the-pandemic/" title="Conquering the pandemic">
        Conquering the pandemic
      </a></li>
      <li><a href="https://sduptownnews.com/guest-editorial-the-way-forward-jobs-for-all/" title="Jobs for all">
        Jobs for all
      </a></li>
      <li><a href="https://sduptownnews.com/the-way-forward-democracy-is-the-answer/" title="Democracy is the answer">
        Democracy is the answer
      </a></li>
    </ul>
  </li>
</ul>
<ul>
  <b>Assorted Works</b>
  <li>
    <ul>
      <li><a href="https://sduptownnews.com/californians-deserve-better-data-protection/" title="Californians deserve better data protection">
        Californians deserve better data protection
      </a></li>
      <li><a href="https://sduptownnews.com/not-planning-on-voting-read-this/" title="Not planning on voting? Read this">
        Not planning on voting? Read this
      </a></li>
      <li><a href="https://sduptownnews.com/guest-editorial-rounding-the-corner/" title="Rounding the corner">
        Rounding the corner
      </a></li>
    </ul>
  </li>
</ul>
<h4>Tags</h4>
<div class="tags">
  
    <a href="/tags.html#tag-programming" title="programming" class="tag">programming</a>,
  
    <a href="/tags.html#tag-pine.blog" title="pine.blog" class="tag">pine.blog</a>,
  
    <a href="/tags.html#tag-open web" title="open web" class="tag">open web</a>,
  
    <a href="/tags.html#tag-software" title="software" class="tag">software</a>,
  
    <a href="/tags.html#tag-blogging" title="blogging" class="tag">blogging</a>,
  
    <a href="/tags.html#tag-software development" title="software development" class="tag">software development</a>,
  
    <a href="/tags.html#tag-development" title="development" class="tag">development</a>,
  
    <a href="/tags.html#tag-politics" title="politics" class="tag">politics</a>,
  
    <a href="/tags.html#tag-history" title="history" class="tag">history</a>,
  
    <a href="/tags.html#tag-python" title="python" class="tag">python</a>
  
</div>
<h4>Blogroll</h4>
<ul>
  <li><a href="https://vincentritter.com/" title="Vincent Ritter" rel="nofollow">
    Vincent Ritter
  </a></li>
  <li><a href="https://gregorlove.com/" title="gRegorLove.com" rel="nofollow">
    gRegorLove.com
  </a></li>
  <li><a href="https://eli.li/" title="Oatmeal" rel="nofollow">
    Oatmeal
  </a></li>
  <li><a href="https://aaronparecki.com/" title="Aaron Parecki" rel="nofollow">
    Aaron Parecki
  </a></li>
  <li><a href="http://inessential.com/" title="inessential" rel="nofollow">
    inessential
  </a></li>
  <li><a href="http://idlewords.com/" title="Idle Words" rel="nofollow">
    Idle Words
  </a></li>
  <li><a href="http://macgenie.micro.blog/" title="Jean MacDonald" rel="nofollow">
    Jean MacDonald
  </a></li>
  <li><a href="https://www.vox.com/authors/ezra-klein" title="Ezra Klein" rel="nofollow">
    Ezra Klein
  </a></li>
  <li><a href="https://pine.blog/u/photosaboutadams" title="Photos About Adams" rel="nofollow">
    Photos About Adams
  </a></li>
  <li><a href="https://iifrp.org" title="IIFRP.org" rel="nofollow">
    IIFRP.org
  </a></li>
  <li><a href="http://mattgemmell.com/" title="Matt Gemmell" rel="nofollow">
    Matt Gemmell
  </a></li>
  <li><a href="http://hypercritical.co/" title="Hypercritical" rel="nofollow">
    Hypercritical
  </a></li>
  <li><a href="https://twitter.com/HelloMelanieC" title="Melanie Crutchfield" rel="nofollow">
    Melanie Crutchfield
  </a></li>
  <li><a href="http://jvns.ca/" title="Julia Evans" rel="nofollow">
    Julia Evans
  </a></li>
  <li><a href="https://kateheddleston.com/blog" title="Kate Heddleston" rel="nofollow">
    Kate Heddleston
  </a></li>
  <li><a href="https://beckyhansmeyer.com/" title="Becky Hansmeyer" rel="nofollow">
    Becky Hansmeyer
  </a></li>
  <li><a href="https://adventurerscodex.com/blog.html" title="Adventurer's Codex Blog" rel="nofollow">
    Adventurer's Codex Blog
  </a></li>
  <li><a href="https://blog.pine.blog/" title="Pine.blog Official Blog" rel="nofollow">
    Pine.blog Official Blog
  </a></li>
  <li><a href="https://www.peoplespolicyproject.org/" title="People's Policy Project" rel="nofollow">
    People's Policy Project
  </a></li>
</ul>
    </div>
  </div>
  <div class="h-card p-author" style="display:none;">
    <img
      class="u-photo"
      src="https://www.gravatar.com/avatar/11b074a636e00292c98e3e60f7e16595"
    />
    <span class="p-name">Brian Schrader</span>
    <span class="p-nickname">sonicrocketman</span>
    <a href="/" class="u-url u-uid"></a>
  </div>

  <div style="text-align:center;">
    <div class="article-content">
      <span style="font-size:small;">
        <a rel="alternate" href="/rss.xml">
          RSS
        </a>
      </div>
    </div>
  </div>

    </div>
  </body>
</html>